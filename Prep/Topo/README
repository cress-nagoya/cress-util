=begin
= 地形データ SRTM 結合変換プログラム

== SRTM30
* NASA の SRTM30 分割地形データを任意の矩形領域データに結合, 4byte big endian 形式で変換するプログラム.
* 本プログラムで変換された地形データはそのまま 3 次元大気モデル CReSS の地形データとして利用できます.

=== 詳細
* 30 秒メッシュの分割地形データ.
* 1 データファイルは南北 50 degree, 東西 40 degree ごとのデータ.
  * 60 S - 90 N までの全域をカバー.
* 格子解像度は緯度・経度ともに 0.0083333333 degree.
* 北西端からデータが格納されている.

=== 必要ライブラリ
* なし.

=== 必要データ
* ((<SRTM|URL:http://dds.cr.usgs.gov/srtm/version2_1/>)) : アメリカ USGS のデータページ.
  * データフォーマットおよび, 解像度等の詳細はディレクトリ内に PDF 資料がある.

=== 実行
(1) ネームリストの編集

    * srtm30.nml 以下の変数で各設定を行う. domain セクションは DCL を用いて描画する際のオプションなのでデータ作成のみなら設定する必要はない.

       &set                ! 結合・描画共通の設定
       lonmin = 100        ! 読み込み開始の経度 (西端)
       latmin = 90         ! 読み込み開始の緯度 (北端)
       fnumber_lon = 2     ! 経度方向のファイル数
       fnumber_lat = 2     ! 緯度方向のファイル数
       foot_name = ".DEM"  ! 読み込むファイルの拡張子
       trn_name = "data.terrain.bin_SRTM30"  ! 作成するデータファイルの名前
       /
       
       &domain             ! 描画時のみに使用する設定 (使わない)
       nnx = 60, 60        ! グラフ化するときの領域 (lonmin からの格子数 x 30 秒)
       nny = 60, 60        ! グラフ化するときの領域 (latmin からの格子数 x 30 秒)
       shade_max = 1000.0  ! シェードの最大値
       IWS = 1             ! IWS = 1 [x], 2 [ps], 4 [png] 描画結果の出力媒体
       /

(2) コマンドの実行

     $ ulimit -s unlimited   # 読み込むデータ数が多い場合, これを行わないと Segmentation Fault する.
     $ ./SRTM30 < srtm30.nml  # trn_name で設定した名前のファイルが作成されている.

=== デモ
((<変換データの描画|URL:./srtm30_demo.png>)).


== SRTM3
* NASA の SRTM3 分割地形データを任意の矩形領域データに結合, 4byte big endian 形式で変換するプログラム.
* 本プログラムで変換された地形データはそのまま 3 次元大気モデル CReSS の地形データとして利用できます.

=== 詳細
* 3 秒メッシュの分割地形データ.
* 1 データファイルは東西ー南北 1 degree x 1 degree ごとのデータ.
  * 陸地が存在している領域のみデータが存在
    * 海洋のみで覆われている領域は本プログラムによって 0 m 高度値が自動補完され矩形データを作成する.

=== 必要ライブラリ
* なし.

=== 必要データ
* ((<SRTM|URL:http://dds.cr.usgs.gov/srtm/version2_1/>)) : アメリカ USGS のデータページ.
  * データフォーマットおよび, 解像度等の詳細はディレクトリ内に PDF 資料がある.

=== 実行方法
(1) ネームリストの編集

    * srtm30.nml 以下の変数で各設定を行う. domain セクションは DCL を用いて描画する際のオプションなのでデータ作成のみなら設定する必要はない.

       &set                ! 結合・描画共通の設定
       lonmin = 100        ! 読み込み開始の経度 (西端)
       latmin = 90         ! 読み込み開始の緯度 (北端)
       fnumber_lon = 2     ! 経度方向のファイル数
       fnumber_lat = 2     ! 緯度方向のファイル数
       foot_name = ".DEM"  ! 読み込むファイルの拡張子
       trn_name = "data.terrain.bin_SRTM3"  ! 作成するデータファイルの名前
       /
       
       &domain             ! 描画時のみに使用する設定 (使わない)
       nnx = 60, 60        ! グラフ化するときの領域 (lonmin からの格子数 x 3 秒)
       nny = 60, 60        ! グラフ化するときの領域 (latmin からの格子数 x 3 秒)
       shade_max = 1000.0  ! シェードの最大値
       IWS = 1             ! IWS = 1 [x], 2 [ps], 4 [png] 描画結果の出力媒体
       /

(2) コマンドの実行

     $ ulimit -s unlimited   # 読み込むデータ数が多い場合, これを行わないと Segmentation Fault する.
     $ ./SRTM3 < srtm3.nml  # trn_name で設定した名前のファイルが作成されている.

=== デモ
((<変換データの描画|URL:./srtm3_demo.png>))



((:<hr>:))

* ((<1 つ上に戻る|URL:../index.html>))
* ((<トップに戻る|URL:../../../index.html>))

=end
